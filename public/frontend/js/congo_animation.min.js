jQuery(document).ready(function(t){function i(t,i){return Math.random()*(i-t)+t}function s(t,i,s,e){var n=t-s,o=i-e;return Math.sqrt(Math.pow(n,2)+Math.pow(o,2))}function e(t,e,n,o){for(this.x=t,this.y=e,this.sx=t,this.sy=e,this.tx=n,this.ty=o,this.distanceToTarget=s(t,e,n,o),this.distanceTraveled=0,this.coordinates=[],this.coordinateCount=3;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=Math.atan2(o-e,n-t),this.speed=2,this.acceleration=1.05,this.brightness=i(50,70),this.targetRadius=1,new Audio("/frontend/audio/ss.mp3").play()}function n(t,s){for(this.x=t,this.y=s,this.coordinates=[],this.coordinateCount=5;this.coordinateCount--;)this.coordinates.push([this.x,this.y]);this.angle=i(0,2*Math.PI),this.speed=i(1,10),this.friction=.95,this.gravity=1,this.hue=i(m-50,m+50),this.brightness=i(50,80),this.alpha=1,this.decay=i(.015,.03)}function o(t,i){for(var s=30;s--;)y.push(new n(t,i))}function h(){requestAnimFrame(h),m=i(0,360),p.globalCompositeOperation="destination-out",p.fillStyle="rgba(0, 0, 0, 0.5)",p.fillRect(0,0,l,g),p.globalCompositeOperation="lighter";for(var t=f.length;t--;)f[t].draw(),f[t].update(t);for(var t=y.length;t--;)y[t].draw(),y[t].update(t);T>=x?b||(f.push(new e(l/2,g,i(0,l),i(0,g/2))),T=0):T++,v>=w?b&&(f.push(new e(l/2,g,d,c)),v=0):v++}window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(t){window.setTimeout(t,1e3/60)}}();var a=document.getElementById("canvas").offsetWidth,r=document.getElementById("canvas").offsetHeight;console.log(a,r);var d,c,u=document.getElementById("canvas"),p=u.getContext("2d"),l=a,g=r,f=[],y=[],m=120,w=5,v=0,x=100,T=0,b=!1;u.width=l,u.height=g,e.prototype.update=function(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.targetRadius<8?this.targetRadius+=.3:this.targetRadius=1,this.speed*=this.acceleration;var i=Math.cos(this.angle)*this.speed,e=Math.sin(this.angle)*this.speed;this.distanceTraveled=s(this.sx,this.sy,this.x+i,this.y+e),this.distanceTraveled>=this.distanceToTarget?(o(this.tx,this.ty),f.splice(t,1)):(this.x+=i,this.y+=e)},e.prototype.draw=function(){p.beginPath(),p.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),p.lineTo(this.x,this.y),p.strokeStyle="hsl("+m+", 100%, "+this.brightness+"%)",p.stroke(),p.beginPath(),p.arc(this.tx,this.ty,this.targetRadius,0,2*Math.PI),p.stroke()},n.prototype.update=function(t){this.coordinates.pop(),this.coordinates.unshift([this.x,this.y]),this.speed*=this.friction,this.x+=Math.cos(this.angle)*this.speed,this.y+=Math.sin(this.angle)*this.speed+this.gravity,this.alpha-=this.decay,this.alpha<=this.decay&&y.splice(t,1)},n.prototype.draw=function(){p.beginPath(),p.moveTo(this.coordinates[this.coordinates.length-1][0],this.coordinates[this.coordinates.length-1][1]),p.lineTo(this.x,this.y),p.strokeStyle="hsla("+this.hue+", 100%, "+this.brightness+"%, "+this.alpha+")",p.stroke()},u.addEventListener("mousemove",function(t){d=t.pageX-u.offsetLeft,c=t.pageY-u.offsetTop}),u.addEventListener("mousedown",function(t){t.preventDefault(),b=!1}),u.addEventListener("mouseup",function(t){t.preventDefault(),b=!1}),window.onload=h});